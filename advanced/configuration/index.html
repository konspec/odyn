
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../usage/exceptions/">
      
      
        <link rel="next" href="../logging/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Configuration - Odyn</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Odyn" class="md-header__button md-logo" aria-label="Odyn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Odyn
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Odyn" class="md-nav__button md-logo" aria-label="Odyn" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Odyn
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/odyn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Odyn Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sessions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#timeout-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timeout Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timeout-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retry-and-backoff-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Retry and Backoff Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retry and Backoff Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-retries" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Retries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backoff-timing-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Backoff Timing Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Input Validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-configuration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Configuration Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Configuration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-based-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Environment-Based Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-via-factory-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration via Factory Pattern
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-retry-attempts" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring Retry Attempts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#timeout-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timeout Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timeout-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Timeout Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retry-and-backoff-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Retry and Backoff Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retry and Backoff Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-retries" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Retries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backoff-timing-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Backoff Timing Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Input Validation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-configuration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common Configuration Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Configuration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-based-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Environment-Based Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-via-factory-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration via Factory Pattern
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-retry-attempts" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring Retry Attempts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Documentation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="advanced-configuration">Advanced Configuration</h1>
<p>The <code>odyn</code> client is designed to be robust and flexible. This guide covers advanced configuration options for timeouts, retry strategies, and common setup patterns to help you tailor the client to your specific needs.</p>
<h2 id="timeout-configuration">Timeout Configuration</h2>
<p>Odyn allows you to set separate timeouts for connecting to the server and for reading the response. This is useful for handling network conditions and long-running queries independently.</p>
<p>The timeout is a tuple of two numbers (integers or floats): <code>(connect_timeout, read_timeout)</code>.</p>
<ul>
<li><strong><code>connect_timeout</code></strong>: The time (in seconds) to wait for a connection to the server to be established.</li>
<li><strong><code>read_timeout</code></strong>: The time (in seconds) to wait for the server to send a response after the connection is established.</li>
</ul>
<p>By default, the timeout is <code>(60, 60)</code>.</p>
<h3 id="timeout-examples">Timeout Examples</h3>
<pre><code class="language-python">from odyn import Odyn, BearerAuthSession

# Default timeout (60s connect, 60s read)
client = Odyn(
    base_url=&quot;https://api.example.com/&quot;,
    session=BearerAuthSession(&quot;your-token&quot;)
)

# Aggressive timeout for fast networks (5s connect, 30s read)
fast_client = Odyn(
    base_url=&quot;https://api.example.com/&quot;,
    session=BearerAuthSession(&quot;your-token&quot;),
    timeout=(5, 30)
)

# Conservative timeout for large data exports (15s connect, 5min read)
bulk_client = Odyn(
    base_url=&quot;https://api.example.com/&quot;,
    session=BearerAuthSession(&quot;your-token&quot;),
    timeout=(15, 300)
)
</code></pre>
<h2 id="retry-and-backoff-strategy">Retry and Backoff Strategy</h2>
<p>The <code>OdynSession</code> and its subclasses (<code>BearerAuthSession</code>, <code>BasicAuthSession</code>) automatically retry failed requests using an exponential backoff strategy. This helps the client recover from transient network errors or temporary server issues.</p>
<h3 id="configuring-retries">Configuring Retries</h3>
<p>You can customize the retry behavior when creating a session instance.</p>
<pre><code class="language-python">from odyn import Odyn, BearerAuthSession

# Customize retry attempts, backoff factor, and status codes to retry on
session = BearerAuthSession(
    token=&quot;your-token&quot;,
    retries=10,
    backoff_factor=1.5,
    status_forcelist=[429, 500, 502, 503, 504]
)

client = Odyn(base_url=&quot;https://api.example.com/&quot;, session=session)
</code></pre>
<ul>
<li><strong><code>retries</code></strong>: The total number of retry attempts. Default: <code>5</code>.</li>
<li><strong><code>backoff_factor</code></strong>: A multiplier for calculating the delay between retries. The delay is <code>backoff_factor * (2 ** (retry_number - 1))</code>. Default: <code>2.0</code>.</li>
<li><strong><code>status_forcelist</code></strong>: A list of HTTP status codes that will trigger a retry. Default: <code>[500, 502, 503, 504, 429]</code>.</li>
</ul>
<h3 id="backoff-timing-examples">Backoff Timing Examples</h3>
<p>The table below shows the delay (in seconds) for each retry attempt based on the <code>backoff_factor</code>.</p>
<table>
<thead>
<tr>
<th>Backoff Factor</th>
<th>1st Retry</th>
<th>2nd Retry</th>
<th>3rd Retry</th>
<th>4th Retry</th>
<th>5th Retry</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0.5</strong></td>
<td>0.5s</td>
<td>1.0s</td>
<td>2.0s</td>
<td>4.0s</td>
<td>8.0s</td>
</tr>
<tr>
<td><strong>1.0</strong></td>
<td>1.0s</td>
<td>2.0s</td>
<td>4.0s</td>
<td>8.0s</td>
<td>16.0s</td>
</tr>
<tr>
<td><strong>2.0</strong> (Default)</td>
<td>2.0s</td>
<td>4.0s</td>
<td>8.0s</td>
<td>16.0s</td>
<td>32.0s</td>
</tr>
</tbody>
</table>
<h2 id="input-validation">Input Validation</h2>
<p>To prevent common errors, <code>odyn</code> performs strict validation on its initial parameters. If validation fails, a descriptive error is raised immediately.</p>
<ul>
<li><strong>Logger</strong>: Must be a <code>loguru.Logger</code> instance. This is validated first so it can be used in subsequent validation steps.</li>
<li><strong>Base URL</strong>:<ul>
<li>Must be a non-empty string.</li>
<li>Must have a valid scheme (<code>http</code> or <code>https</code>).</li>
<li>Must contain a network location (domain).</li>
<li>Is automatically sanitized to ensure it ends with a <code>/</code>.</li>
</ul>
</li>
<li><strong>Session</strong>: Must be an instance of <code>requests.Session</code>.</li>
<li><strong>Timeout</strong>:<ul>
<li>Must be a tuple.</li>
<li>Must contain exactly two elements.</li>
<li>Both elements must be positive numbers (int or float).</li>
</ul>
</li>
</ul>
<h2 id="common-configuration-patterns">Common Configuration Patterns</h2>
<p>Here are some common patterns for managing <code>odyn</code> client configuration in your applications.</p>
<h3 id="environment-based-configuration">Environment-Based Configuration</h3>
<p>A common practice is to configure the client using environment variables, which is ideal for containerized or cloud-native applications.</p>
<pre><code class="language-python">import os
from odyn import Odyn, BearerAuthSession

def create_client_from_env():
    &quot;&quot;&quot;Creates a client using settings from environment variables.&quot;&quot;&quot;
    session = BearerAuthSession(
        token=os.environ[&quot;BC_TOKEN&quot;],
        retries=int(os.getenv(&quot;BC_RETRIES&quot;, 5)),
        backoff_factor=float(os.getenv(&quot;BC_BACKOFF&quot;, 2.0))
    )

    client = Odyn(
        base_url=os.environ[&quot;BC_BASE_URL&quot;],
        session=session,
        timeout=(
            int(os.getenv(&quot;BC_CONNECT_TIMEOUT&quot;, 60)),
            int(os.getenv(&quot;BC_READ_TIMEOUT&quot;, 60))
        )
    )
    return client
</code></pre>
<h3 id="configuration-via-factory-pattern">Configuration via Factory Pattern</h3>
<p>A factory can help create consistently configured clients for different environments (e.g., development vs. production).</p>
<pre><code class="language-python">from odyn import Odyn, BearerAuthSession

class OdynClientFactory:
    &quot;&quot;&quot;A factory for creating pre-configured Odyn clients.&quot;&quot;&quot;

    @staticmethod
    def create(base_url: str, token: str, environment: str = &quot;production&quot;) -&gt; Odyn:
        if environment == &quot;development&quot;:
            session = BearerAuthSession(token=token, retries=3, backoff_factor=1.0)
            timeout = (10, 60) # Fast timeouts for dev
        else: # production
            session = BearerAuthSession(token=token, retries=10, backoff_factor=2.0)
            timeout = (30, 180) # Conservative timeouts for prod

        return Odyn(base_url=base_url, session=session, timeout=timeout)

# Usage
# dev_client = OdynClientFactory.create(base_url, token, environment=&quot;development&quot;)
# prod_client = OdynClientFactory.create(base_url, token, environment=&quot;production&quot;)
</code></pre>
<h2 id="monitoring-retry-attempts">Monitoring Retry Attempts</h2>
<p>Because retries are handled by the underlying <code>urllib3</code> library, they are not logged through <code>odyn</code>'s logger by default. To see these logs, you must intercept the standard <code>logging</code> library messages and redirect them to <code>loguru</code>.</p>
<p>This is the recommended way to monitor retry behavior and diagnose transient issues.</p>
<pre><code class="language-python">import logging
from loguru import logger

# Configure loguru to intercept logs from the standard logging library
class InterceptHandler(logging.Handler):
    def emit(self, record: logging.LogRecord) -&gt; None:
        try:
            level = logger.level(record.levelname).name
        except ValueError:
            level = record.levelno

        frame, depth = logging.currentframe(), 2
        while frame and frame.f_code.co_filename == logging.__file__:
            frame = frame.f_back
            depth += 1

        logger.opt(depth=depth, exception=record.exc_info).log(
            level, record.getMessage()
        )

# Apply the interceptor
logging.basicConfig(handlers=[InterceptHandler()], level=0, force=True)

# Now, when a request is retried, you will see a WARNING log from urllib3.
# Example: WARNING: Retrying (Retry(total=2, connect=None, read=None, ...))
</code></pre>
<p>For more details on logging, see the <a href="../logging/">Logging</a> documentation.</p>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../../usage/odyn/">Odyn Client API</a></li>
<li><a href="../../usage/sessions/">Authentication Sessions</a></li>
<li><a href="../logging/">Logging Guide</a></li>
<li><a href="../../usage/exceptions/">Exception Handling</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>